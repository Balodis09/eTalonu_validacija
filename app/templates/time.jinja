{% extends 'base.jinja' %}

{% block title %}
<title>eTalonu validācijas - Braucieni stundā</title>
{% endblock title %}

{% block head %}
{{ super() }}
<script src='https://unpkg.com/chart.js@4.4.3/dist/chart.umd.js'
  integrity='sha512-LUpacDQOhzI4MVomIbJOUbdKypLvklsznjLrjD9GwzynjSlF7qLy112SzTw+ZWJPxhBvNRLGGdW/7E1slOvsFA=='
  crossorigin='anonymous' defer></script>
<script src="https://unpkg.com/htmx.org@2.0.3"
  integrity="sha512-dQu3OKLMpRu85mW24LA1CUZG67BgLPR8Px3mcxmpdyijgl1UpCM1RtJoQP6h8UkufSnaHVRTUx98EQT9fcKohw=="
  crossorigin="anonymous" defer></script>
{% endblock head %}

{% block page_content %}
<div style='width: 75%; margin: auto;'>
  <canvas id='myChart' hx-get='{{ data_url }}' hx-trigger='load'></canvas>
</div>
{% endblock page_content %}
{% block scripts %}
<script>
  document.body.addEventListener('htmx:afterOnLoad', function (evt) {
    new Chart(
      document.getElementById('myChart'),
      {
        type: 'bar',
        data: JSON.parse(evt.detail.xhr.responseText)
      }
    );
  });
</script>
{% endblock scripts %}