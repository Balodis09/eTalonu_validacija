{% extends 'base.jinja' %}

{% block title %}
<title>eTalonu valid캐cijas - Popul캐r캐kie mar코ruti</title>
{% endblock title %}

{% block head %}
{{ super() }}
<script src='https://unpkg.com/chart.js@4.4.3/dist/chart.umd.js'
    integrity='sha512-LUpacDQOhzI4MVomIbJOUbdKypLvklsznjLrjD9GwzynjSlF7qLy112SzTw+ZWJPxhBvNRLGGdW/7E1slOvsFA=='
    crossorigin='anonymous' defer></script>
{% endblock head %}

{% block page_content %}
<canvas id='mostUsedRoutesChart' x-init='$nextTick(() => {newChart()})'></canvas>
{% endblock page_content %}
{% block scripts %}
<script src="{{ url_for('static', filename='js/newChart.js') }}" defer></script>
<script>
    async function newChart() {
        const response = await fetch('{{ data_url }}');
        const validations = await response.json();
        const labels = validations.labels;
        const datasets = validations.datasets;
        createChart('mostUsedRoutesChart', labels, datasets);
    }
</script>

{% endblock scripts %}